<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</title>
  <link rel="stylesheet" href="admin.css">
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/accessibility-init.js"></script>
  
  <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ç—á–µ—Ç–æ–≤ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  
  <!-- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è PDF —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Unicode -->
  <script src="https://unpkg.com/pdfmake@0.2.7/build/pdfmake.min.js"></script>
  <script src="https://unpkg.com/pdfmake@0.2.7/build/vfs_fonts.js"></script>
  
  <!-- Chart.js –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –¥–∏–∞–≥—Ä–∞–º–º -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- JSZip –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  
  <!-- Preload default images –¥–ª—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ -->
  <link rel="preload" href="img/default-project.png" as="image">
</head>
<body>
  <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∂—ë–ª—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
  <div class="yellow-deco deco-top-left"></div>
  <div class="yellow-deco deco-top-right"></div>
  <div class="yellow-deco deco-bottom-left"></div>
  <div class="yellow-deco deco-bottom-right"></div>

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <header class="admin-header">
    <div class="header-content">
      <h1>üõ†Ô∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
      <div class="header-actions">
        <button id="logout-btn" class="logout-btn">–í—ã–π—Ç–∏</button>
        <a href="index.html" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–∞–π—Ç—É</a>
      </div>
    </div>
  </header>

  <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞ -->
  <div id="admin-auth-modal" class="modal show">
    <div class="modal-content">
      <h2>üîê –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h2>
      <p style="color: #ccc; margin-bottom: 20px; text-align: center;">–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"</p>
      <div class="auth-form">
        <input type="email" id="admin-email" placeholder="Email" required>
        <input type="password" id="admin-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
        <button id="admin-login-btn">–í–æ–π—Ç–∏</button>
        <div id="admin-auth-error" class="error-message"></div>
      </div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main id="admin-content" class="admin-content" style="display: none;">
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <section class="stats-section">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">üë•</div>
          <div class="stat-info">
            <div class="stat-number" id="users-count">0</div>
            <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üìÅ</div>
          <div class="stat-info">
            <div class="stat-number" id="projects-count">0</div>
            <div class="stat-label">–ü—Ä–æ–µ–∫—Ç–æ–≤</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üí¨</div>
          <div class="stat-info">
            <div class="stat-number" id="messages-count">0</div>
            <div class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π</div>
          </div>
        </div>

      </div>
    </section>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º -->
    <nav class="admin-nav">
      <button class="nav-btn active" data-section="users">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
      <button class="nav-btn" data-section="projects">üìÅ –ü—Ä–æ–µ–∫—Ç—ã</button>
      <button class="nav-btn" data-section="messages">üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</button>
      <button class="nav-btn" data-section="reports">üìä –û—Ç—á–µ—Ç—ã</button>
      <button class="nav-btn" data-section="pending-deletion">üóëÔ∏è –ù–∞ —É–¥–∞–ª–µ–Ω–∏–∏</button>
    </nav>

    <!-- –°–µ–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <section id="users-section" class="admin-section active">
      <div class="section-header">
        <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
        <div class="section-actions">
          <input type="text" id="users-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..." class="search-input">
          <button id="refresh-users" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
      </div>
      <div class="table-container">
                  <table class="admin-table">
            <thead>
              <tr>
                <th>–§–æ—Ç–æ</th>
                <th>–ò–º—è</th>
                <th>Email</th>
                <th>–†–æ–ª—å</th>
                <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                <th>–ü—Ä–æ–µ–∫—Ç–æ–≤</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
          <tbody id="users-table-body">
            <tr><td colspan="6" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
    <section id="projects-section" class="admin-section">
      <div class="section-header">
        <h2>üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</h2>
        <div class="section-actions">
          <input type="text" id="projects-search" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤..." class="search-input">
          <select id="projects-filter" class="filter-select">
            <option value="">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
            <option value="recent">–ù–µ–¥–∞–≤–Ω–∏–µ</option>
            <option value="popular">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</option>
          </select>
          <button id="refresh-projects" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
      </div>
      <div class="table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>–ü—Ä–µ–≤—å—é</th>
              <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
              <th>–ê–≤—Ç–æ—Ä</th>
              <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
              <th>–†–∞–∑–º–µ—Ä</th>
              <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody id="projects-table-body">
            <tr><td colspan="6" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤...</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π -->
    <section id="messages-section" class="admin-section">
      <div class="section-header">
        <h2>üí¨ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏</h2>
        <div class="section-actions">
          <input type="text" id="messages-search" placeholder="–ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π..." class="search-input">
          <select id="messages-filter" class="filter-select">
            <option value="">–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è</option>
            <option value="text">–¢–µ–∫—Å—Ç–æ–≤—ã–µ</option>
            <option value="project">–ü—Ä–æ–µ–∫—Ç—ã</option>
          </select>
          <button id="refresh-messages" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
      </div>
      <div class="table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>–ê–≤–∞—Ç–∞—Ä</th>
              <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
              <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
              <th>–¢–∏–ø</th>
              <th>–í—Ä–µ–º—è</th>
              <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody id="messages-table-body">
            <tr><td colspan="6" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π...</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ -->
    <section id="reports-section" class="admin-section">
      <div class="section-header">
        <h2>üìä –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤</h2>
        <div class="section-actions">
          <button id="refresh-reports" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        </div>
      </div>

      <!-- –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç—á–µ—Ç—ã -->
      <div class="reports-quick-section">
        <h3>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç—á–µ—Ç—ã</h3>
        <div class="quick-reports-grid">
          <div class="quick-report-card">
            <div class="quick-report-icon">üë•</div>
            <div class="quick-report-info">
              <h4>–û—Ç—á–µ—Ç –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</h4>
              <p>–ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
              <div class="quick-report-actions">
                <button class="quick-report-btn" onclick="generateQuickReport('users', 'pdf')">üìÑ PDF</button>
                <button class="quick-report-btn" onclick="generateQuickReport('users', 'excel')">üìä Excel</button>
              </div>
            </div>
          </div>
          
          <div class="quick-report-card">
            <div class="quick-report-icon">üìÅ</div>
            <div class="quick-report-info">
              <h4>–û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º</h4>
              <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
              <div class="quick-report-actions">
                <button class="quick-report-btn" onclick="generateQuickReport('projects', 'pdf')">üìÑ PDF</button>
                <button class="quick-report-btn" onclick="generateQuickReport('projects', 'excel')">üìä Excel</button>
              </div>
            </div>
          </div>
          
          <div class="quick-report-card">
            <div class="quick-report-icon">üí¨</div>
            <div class="quick-report-info">
              <h4>–û—Ç—á–µ—Ç –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º</h4>
              <p>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —á–∞—Ç–µ</p>
              <div class="quick-report-actions">
                <button class="quick-report-btn" onclick="generateQuickReport('messages', 'pdf')">üìÑ PDF</button>
                <button class="quick-report-btn" onclick="generateQuickReport('messages', 'excel')">üìä Excel</button>
              </div>
            </div>
          </div>
          
          <div class="quick-report-card">
            <div class="quick-report-icon">üìà</div>
            <div class="quick-report-info">
              <h4>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
              <p>–°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ</p>
              <div class="quick-report-actions">
                <button class="quick-report-btn" onclick="generateQuickReport('summary', 'pdf')">üìÑ PDF</button>
                <button class="quick-report-btn" onclick="generateQuickReport('summary', 'excel')">üìä Excel</button>
              </div>
            </div>
          </div>
          
          <div class="quick-report-card">
            <div class="quick-report-icon">üìä</div>
            <div class="quick-report-info">
              <h4>–ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã</h4>
              <p>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö</p>
              <div class="quick-report-actions">
                <button class="quick-report-btn primary" onclick="showChartsModal()">üìà –ü–æ–∫–∞–∑–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—Ç—á–µ—Ç—ã -->
      <div class="reports-custom-section">
        <h3>üîß –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –æ—Ç—á–µ—Ç—ã</h3>
        <div class="custom-report-form">
          <div class="form-row">
            <div class="form-group">
              <label for="report-type">–¢–∏–ø –æ—Ç—á–µ—Ç–∞:</label>
              <select id="report-type" class="filter-select">
                <option value="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                <option value="projects">–ü—Ä–æ–µ–∫—Ç—ã</option>
                <option value="messages">–°–æ–æ–±—â–µ–Ω–∏—è</option>
                <option value="activity">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</option>
                <option value="custom">–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="report-period">–ü–µ—Ä–∏–æ–¥:</label>
              <select id="report-period" class="filter-select">
                <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                <option value="week">–ü–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—è</option>
                <option value="month">–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü</option>
                <option value="quarter">–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–≤–∞—Ä—Ç–∞–ª</option>
                <option value="year">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥</option>
                <option value="all">–í—Å–µ –≤—Ä–µ–º—è</option>
                <option value="custom">–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–µ—Ä–∏–æ–¥</option>
              </select>
            </div>
          </div>
          
          <div class="form-row" id="custom-date-range" style="display: none;">
            <div class="form-group">
              <label for="date-from">–° –¥–∞—Ç—ã:</label>
              <input type="date" id="date-from" class="search-input">
            </div>
            <div class="form-group">
              <label for="date-to">–ü–æ –¥–∞—Ç—É:</label>
              <input type="date" id="date-to" class="search-input">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="report-format">–§–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞:</label>
              <select id="report-format" class="filter-select">
                <option value="pdf">PDF –¥–æ–∫—É–º–µ–Ω—Ç</option>
                <option value="excel">Excel —Ç–∞–±–ª–∏—Ü–∞</option>
                <option value="csv">CSV —Ñ–∞–π–ª</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="report-name">–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞:</label>
              <input type="text" id="report-name" class="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞">
            </div>
          </div>
          
          <div class="form-actions">
            <button id="generate-custom-report" class="primary-btn">üìä –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç</button>
            <button id="save-report-template" class="secondary-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
          </div>
        </div>
      </div>

      <!-- –ò—Å—Ç–æ—Ä–∏—è –æ—Ç—á–µ—Ç–æ–≤ -->
      <div class="reports-history-section">
        <h3>üìã –ò—Å—Ç–æ—Ä–∏—è –æ—Ç—á–µ—Ç–æ–≤</h3>
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–¢–∏–ø</th>
                <th>–ü–µ—Ä–∏–æ–¥</th>
                <th>–§–æ—Ä–º–∞—Ç</th>
                <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                <th>–†–∞–∑–º–µ—Ä</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody id="reports-history-body">
              <tr><td colspan="7" class="loading">–ò—Å—Ç–æ—Ä–∏—è –æ—Ç—á–µ—Ç–æ–≤ –ø—É—Å—Ç–∞</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- –®–∞–±–ª–æ–Ω—ã –æ—Ç—á–µ—Ç–æ–≤ -->
      <div class="reports-templates-section">
        <h3>üìù –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</h3>
        <div class="templates-grid" id="report-templates-grid">
          <div class="template-card add-template" onclick="showAddTemplateModal()">
            <div class="template-icon">‚ûï</div>
            <div class="template-title">–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω</div>
          </div>
        </div>
      </div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏ -->
    <section id="pending-deletion-section" class="admin-section">
      <div class="section-header">
        <h2>üóëÔ∏è –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏</h2>
        <div class="section-actions">
          <button id="refresh-pending" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
          <button id="clear-all-pending" class="danger-btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
        </div>
      </div>

      <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏ -->
      <div class="pending-stats">
        <div class="pending-stat-card">
          <div class="pending-stat-icon">üë•</div>
          <div class="pending-stat-info">
            <div class="pending-stat-number" id="pending-users-count">0</div>
            <div class="pending-stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
          </div>
        </div>
        <div class="pending-stat-card">
          <div class="pending-stat-icon">üìÅ</div>
          <div class="pending-stat-info">
            <div class="pending-stat-number" id="pending-projects-count">0</div>
            <div class="pending-stat-label">–ü—Ä–æ–µ–∫—Ç–æ–≤</div>
          </div>
        </div>
        <div class="pending-stat-card">
          <div class="pending-stat-icon">üí¨</div>
          <div class="pending-stat-info">
            <div class="pending-stat-number" id="pending-messages-count">0</div>
            <div class="pending-stat-label">–°–æ–æ–±—â–µ–Ω–∏–π</div>
          </div>
        </div>
      </div>

      <!-- –í–∫–ª–∞–¥–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ -->
      <div class="pending-tabs">
        <button class="pending-tab active" data-type="users">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
        <button class="pending-tab" data-type="projects">üìÅ –ü—Ä–æ–µ–∫—Ç—ã</button>
        <button class="pending-tab" data-type="messages">üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</button>
      </div>

      <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏ -->
      <div id="pending-users" class="pending-content active">
        <div class="section-header">
          <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏</h3>
          <div class="section-actions">
            <input type="text" id="pending-users-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..." class="search-input">
            <button id="restore-all-users" class="secondary-btn">‚Ü©Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ</button>
          </div>
        </div>
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>–§–æ—Ç–æ</th>
                <th>–ò–º—è</th>
                <th>Email</th>
                <th>–†–æ–ª—å</th>
                <th>–î–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è</th>
                <th>–£–¥–∞–ª–∏–ª</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody id="pending-users-table-body">
              <tr><td colspan="7" class="loading">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- –ü—Ä–æ–µ–∫—Ç—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏ -->
      <div id="pending-projects" class="pending-content">
        <div class="section-header">
          <h3>–ü—Ä–æ–µ–∫—Ç—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏</h3>
          <div class="section-actions">
            <input type="text" id="pending-projects-search" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤..." class="search-input">
            <button id="restore-all-projects" class="secondary-btn">‚Ü©Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ</button>
          </div>
        </div>
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>–ü—Ä–µ–≤—å—é</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ê–≤—Ç–æ—Ä</th>
                <th>–î–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è</th>
                <th>–£–¥–∞–ª–∏–ª</th>
                <th>–†–∞–∑–º–µ—Ä</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody id="pending-projects-table-body">
              <tr><td colspan="7" class="loading">–ù–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- –°–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏ -->
      <div id="pending-messages" class="pending-content">
        <div class="section-header">
          <h3>–°–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏</h3>
          <div class="section-actions">
            <input type="text" id="pending-messages-search" placeholder="–ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π..." class="search-input">
            <button id="restore-all-messages" class="secondary-btn">‚Ü©Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ</button>
          </div>
        </div>
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>–ê–≤–∞—Ç–∞—Ä</th>
                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
                <th>–¢–∏–ø</th>
                <th>–î–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è</th>
                <th>–£–¥–∞–ª–∏–ª</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody id="pending-messages-table-body">
              <tr><td colspan="7" class="loading">–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–∏</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

  </main>

  <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
  
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ -->
  <div id="project-modal" class="modal">
    <div class="modal-content large">
      <div class="modal-header">
        <h3 id="project-modal-title">–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–µ–∫—Ç–∞</h3>
        <button class="close-btn" onclick="closeModal('project-modal')">&times;</button>
      </div>
      <div class="modal-body">
        <div class="project-preview">
          <div class="code-section">
            <h4>HTML:</h4>
            <pre id="project-html-code"></pre>
          </div>
          <div class="code-section">
            <h4>CSS:</h4>
            <pre id="project-css-code"></pre>
          </div>
          <div class="preview-section">
            <h4>–ü—Ä–µ–≤—å—é:</h4>
            <iframe id="project-preview-frame" sandbox="allow-scripts"></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
  <div id="confirm-modal" class="modal">
    <div class="modal-content small">
      <div class="modal-header">
        <h3 id="confirm-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
        <button class="close-btn" onclick="closeModal('confirm-modal')">&times;</button>
      </div>
      <div class="modal-body">
        <p id="confirm-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
        <div class="modal-actions">
          <button id="confirm-yes" class="danger-btn">–î–∞</button>
          <button id="confirm-no" class="secondary-btn" onclick="closeModal('confirm-modal')">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ –æ—Ç—á–µ—Ç–∞ -->
  <div id="template-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>üìù –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –æ—Ç—á–µ—Ç–∞</h3>
        <button class="close-btn" onclick="closeModal('template-modal')">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="template-name">–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞:</label>
          <input type="text" id="template-name" class="search-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞">
        </div>
        
        <div class="form-group">
          <label for="template-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
          <textarea id="template-description" class="search-input" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞"></textarea>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="template-type">–¢–∏–ø –æ—Ç—á–µ—Ç–∞:</label>
            <select id="template-type" class="filter-select">
              <option value="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
              <option value="projects">–ü—Ä–æ–µ–∫—Ç—ã</option>
              <option value="messages">–°–æ–æ–±—â–µ–Ω–∏—è</option>
              <option value="activity">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</option>
              <option value="custom">–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="template-format">–§–æ—Ä–º–∞—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:</label>
            <select id="template-format" class="filter-select">
              <option value="pdf">PDF –¥–æ–∫—É–º–µ–Ω—Ç</option>
              <option value="excel">Excel —Ç–∞–±–ª–∏—Ü–∞</option>
              <option value="csv">CSV —Ñ–∞–π–ª</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label>–í–∫–ª—é—á–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="include-summary" checked>
              <span>–°–≤–æ–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="include-charts" checked>
              <span>–ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="include-details">
              <span>–î–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="include-trends">
              <span>–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤</span>
            </label>
          </div>
        </div>
        
        <div class="modal-actions">
          <button id="save-template" class="primary-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
          <button onclick="closeModal('template-modal')" class="secondary-btn">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞ -->
  <div id="report-progress-modal" class="modal">
    <div class="modal-content small">
      <div class="modal-header">
        <h3>üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞</h3>
      </div>
      <div class="modal-body">
        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <div class="progress-text" id="progress-text">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
          <div class="progress-percentage" id="progress-percentage">0%</div>
        </div>
        <div class="progress-details" id="progress-details">
          <div class="progress-step">‚úì –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ -->
  <div id="charts-modal" class="modal">
    <div class="modal-content extra-large">
      <div class="modal-header">
        <h3>üìà –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã</h3>
        <button class="close-btn" onclick="closeModal('charts-modal')">&times;</button>
      </div>
      <div class="modal-body">
        <div class="charts-container">
          <div class="chart-section">
            <h4>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–æ–ª—è–º</h4>
            <div class="chart-wrapper">
              <canvas id="userRolesChart"></canvas>
            </div>
          </div>
          
          <div class="chart-section">
            <h4>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º</h4>
            <div class="chart-wrapper">
              <canvas id="projectSizesChart"></canvas>
            </div>
          </div>
          
          <div class="chart-section">
            <h4>–¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π</h4>
            <div class="chart-wrapper">
              <canvas id="messageTypesChart"></canvas>
            </div>
          </div>
          
          <div class="chart-section full-width">
            <h4>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º</h4>
            <div class="chart-wrapper">
              <canvas id="dailyActivityChart"></canvas>
            </div>
          </div>
        </div>
        
        <div class="modal-actions">
          <button id="export-charts" class="primary-btn">üíæ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏</button>
          <button onclick="closeModal('charts-modal')" class="secondary-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="admin.js"></script>
</body>
</html> 